# PrivacyBot: Advanced LLM-Powered RAG Techniques to Enhance User Privacy Literacy
<p align="center">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Logo_Universit√©_de_Lausanne.svg/1280px-Logo_Universit√©_de_Lausanne.svg.png" width="250" height="100"/> <br>
 </p>

 **By** : Feryel Ben Rhaiem


## üßê Overview
PrivacyBot is a state-of-the-art system designed to explore and evaluate different Retrieval-Augmented Generation (RAG) techniques. It uses LlamaIndex as its core framework to optimize interactions between large language models (LLMs) and data. The project focuses on enhancing user privacy literacy through conversational AI. This repository includes the implementation and evaluation of various RAG pipelines, from a basic Naive RAG model to more advanced techniques like Sentence Window Retrieval, Auto-Merging Retrieval, Re-ranking, and Prompt Engineering.

## üí° Features
* **Naive RAG Implementation** : A baseline model that combines retrieval and generation.
* **Advanced RAG Techniques** : Includes Sentence Window Retrieval, Auto-Merging Retrieval, Re-ranking, and Prompt Engineering.
* **TruLens Evaluation** : Integration with TruLens framework for detailed evaluation metrics.
* **Configurable Pipelines** : Easily switch between different RAG pipelines.

## ‚öôÔ∏è Setup
### Requirements
* Python 3.8 or above
* OpenAI API Key for LLM integration
* Required Python libraries are listed in requirements.txt.

### Installation
1. Clone the repository:
```console
git clone https://github.com/Feryel-Ben-Rhaiem/privacybot.git
cd privacybot
```
2.  Install the dependencies:
```console
pip install -r requirements.txt
```
3. Configure your API key and models in config.yaml.

## üìÅ Folder Structure
* **src** : Contains the implementation and evaluation of all RAG pipelines in the files ragpipelines.py, app.ipynb, and evaluation.ipynb.
* **files** : Contains the files needed for the training and evaluation of the RAG pipelines, namely; privacy-pmi.pdf, pmi_privacy_policy_qa.txt, and eval_questions.xlsx.
* **config.yaml** : Configuration file for setting up API keys and models.
* **requirements.txt** : List of required Python libraries.

## üë©‚Äçüíª Usage
1. **Running the Pipelines** :
   * You can run the RAG pipelines using the notebook app.ipynb and the Python file ragpipelines.py.
   * Select the desired pipeline and run queries to get responses.

2. **Evaluating Pipelines** :
   * The evaluation is conducted through the evaluation.ipynb notebook.
   * Metrics such as Answer Relevance, Context Relevance, Groundedness, and Answer Correctness are computed using TruLens.

## ü§ñ RAG Pipelines & Enhancing Techniques
* **Naive RAG Pipeline**
* **Sentence Window Retrieval**
* **Re-ranking**
* **Prompt Engineering**

## üéØ Evaluation and Results
The evaluation is conducted using TruLens, an evaluation framework that uses LLM Evals and feedback functions. The results highlight the strengths and weaknesses of each pipeline, focusing on the following performance metrics; Answer Correctness, Context Relevance, Groundedness, and Answer Relevance, and the following efficiency metrics; token consumption and cost of API calls.

## üì± UI

### Single-Response Interface: 
This is the first UI option where users can select a single RAG pipeline and interact with a chatbot. The user can ask questions about PMI's privacy policy and receive a response from the selected pipeline, making it easy to evaluate individual pipeline performance in real-time.

![Display1](https://github.com/Feryel-Ben-Rhaiem/privacybot/blob/main/files/Display1.png?raw=true)


### Multi-Response Interface:
This demonstrates the UI for comparing multiple RAG pipeline responses side by side. The interface allows users to input a query and view the responses generated by different pipelines, facilitating easy comparison of their effectiveness.

![Display2](https://github.com/Feryel-Ben-Rhaiem/privacybot/blob/main/files/Display2.png)


### TruLens Leaderboard Interface:
This UI displays the TruLens dashboard showcasing the leaderboard of various query engine configurations. It highlights key metrics, providing a visual summary of the performance for each configuration.

![TruLens](https://github.com/Feryel-Ben-Rhaiem/privacybot/blob/main/files/TruLens-Dashboard.png)
